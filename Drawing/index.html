<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Drawing App</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<h1>SVG Drawing App</h1>

<!-- Action Toolbar (Above Canvas) -->
<div id="action-toolbar" class="controls toolbar">
    <button id="select-tool" data-tool="select" title="Select Tool">Select</button>
    <button id="rotate-tool" data-tool="rotate" title="Rotate Tool">Rotate</button>
    <button id="delete-tool" data-tool="delete" title="Delete Tool">Delete</button>
    <button id="undo-button" title="Undo Last Action" disabled>Undo</button>
    <button id="redo-button" title="Redo Last Action" disabled>Redo</button>
    <!-- Removed Save and Load Buttons -->
    <button id="export-svg" title="Export as SVG file">Export</button>
    <button id="import-svg" title="Import from SVG file">Import</button>
    <input type="file" class="file-input" id="file-input" accept=".svg" />
    <input type="file" class="file-input" id="library-input" accept=".svg" multiple />
</div>

<!-- Main Content Area -->
<div id="container">
    <div class="sidebar" id="activity-list">
        <h3>Activities</h3>
        <!-- Activity items will be populated here -->
    </div>
    <div id="drawing-area">
        <svg id="svg-canvas" width="800" height="600" viewBox="0 0 800 600">
            <defs>
                <!-- Marker definitions will be injected here by JS -->
            </defs>
            <g id="field-layer"></g>
            <rect id="selection-rectangle" fill="rgba(0, 120, 255, 0.1)" stroke="rgba(0, 80, 200, 0.7)" stroke-width="1" stroke-dasharray="3 3" visibility="hidden" />
            <!-- Temporary Drawing Previews -->
            <line id="temp-arrow-preview" class="temp-preview-line" stroke="grey" stroke-width="2" visibility="hidden" />
            <line id="temp-arrow-preview-2" class="temp-preview-line" stroke="grey" stroke-width="2" visibility="hidden" />
            <path id="temp-freehand-preview" class="temp-preview-line" fill="none" stroke="grey" stroke-width="2" visibility="hidden" />
            <line id="temp-line-preview" class="temp-preview-line" stroke="grey" stroke-width="2" visibility="hidden" />
            <rect id="temp-rect-preview" class="temp-preview-shape" fill="none" stroke="grey" stroke-width="1" visibility="hidden" />
            <circle id="temp-circle-preview" class="temp-preview-shape" fill="none" stroke="grey" stroke-width="1" visibility="hidden" />
            <polygon id="temp-triangle-preview" class="temp-preview-shape" fill="none" stroke="grey" stroke-width="1" visibility="hidden" /> <!-- ADDED: Triangle Preview -->
            <!-- Temporary Text Input Area -->
            <foreignObject id="text-input-container" width="1" height="1" style="display: none; overflow: visible;">
                <textarea id="text-input-field" xmlns="http://www.w3.org/1999/xhtml"></textarea>
            </foreignObject>
            <!-- Main Content Layer -->
            <g id="content-layer"></g>
        </svg>
    </div>
    <div class="sidebar" id="svg-library">
        <h3>SVG Library</h3>
        <div style="text-align: center; margin-bottom: 10px;">
            <button id="add-svg-btn" style="width: 90%;">Add SVG to Library</button>
        </div>
        <!-- Library items will be populated here -->
    </div>
</div>

<!-- Drawing Toolbar (Below Canvas) -->
<div id="drawing-toolbar" class="controls toolbar">

    <!-- Field Selector -->
    <div id="field-selector" class="tool-group">
        <button type="button" id="custom-field-select-trigger" class="custom-select-trigger" aria-haspopup="listbox" aria-expanded="false" title="Select Field Background"> </button>
        <span id="field-description" class="trigger-description"></span>
        <div id="custom-field-select-options" class="custom-select-options" role="listbox"> <ul id="field-options-list"></ul> </div>
    </div>

    <!-- Player Selector -->
    <div id="player-tool-selector" class="tool-group">
        <button type="button" id="custom-player-select-trigger" class="custom-select-trigger" aria-haspopup="listbox" aria-expanded="false" title="Select Player Tool"> </button>
        <span id="player-description" class="trigger-description"></span>
        <div id="custom-player-select-options" class="custom-select-options" role="listbox"> <ul id="player-options-list"></ul> </div>
    </div>

    <!-- Equipment Selector -->
    <div id="equipment-tool-selector" class="tool-group">
        <button type="button" id="custom-equipment-select-trigger" class="custom-select-trigger" aria-haspopup="listbox" aria-expanded="false" title="Select Equipment Tool"> </button>
        <span id="equipment-description" class="trigger-description"></span>
        <div id="custom-equipment-select-options" class="custom-select-options" role="listbox"> <ul id="equipment-options-list"></ul> </div>
    </div>

    <!-- Movement Selector -->
    <div id="movement-tool-selector" class="tool-group">
        <button type="button" id="custom-movement-select-trigger" class="custom-select-trigger" aria-haspopup="listbox" aria-expanded="false" title="Select Movement Tool"> </button>
        <span id="movement-description" class="trigger-description"></span>
        <div id="custom-movement-select-options" class="custom-select-options" role="listbox"> <ul id="movement-options-list"></ul> </div>
    </div>

    <!-- Pass/Shot Selector -->
    <div id="passShot-tool-selector" class="tool-group">
        <button type="button" id="custom-passShot-select-trigger" class="custom-select-trigger" aria-haspopup="listbox" aria-expanded="false" title="Select Pass/Shot Tool"> </button>
        <span id="passShot-description" class="trigger-description"></span>
        <div id="custom-passShot-select-options" class="custom-select-options" role="listbox"> <ul id="passShot-options-list"></ul> </div>
    </div>

    <!-- Shape Selector -->
    <div id="shape-tool-selector" class="tool-group">
        <button type="button" id="custom-shape-select-trigger" class="custom-select-trigger" aria-haspopup="listbox" aria-expanded="false" title="Select Shape/Line Tool"> </button>
        <span id="shape-description" class="trigger-description"></span>
        <div id="custom-shape-select-options" class="custom-select-options" role="listbox"> <ul id="shape-options-list"></ul> </div>
    </div>

    <!-- Number Selector -->
    <div id="number-tool-selector" class="tool-group">
        <button type="button" id="custom-number-select-trigger" class="custom-select-trigger" aria-haspopup="listbox" aria-expanded="false" title="Select Number Tool"> </button>
        <span id="number-description" class="trigger-description"></span>
        <div id="custom-number-select-options" class="custom-select-options" role="listbox"> <ul id="number-options-list"></ul> </div>
    </div>

    <!-- Text Tool Button Group -->
    <div id="text-tool-group" class="tool-group">
        <button id="text-tool-button" class="tool-item" data-tool="text-tool" title="Text Tool"> T </button>
        <span id="text-description" class="trigger-description">Text</span>
    </div>

    <!-- Color Picker -->
    <div id="color-picker-group" class="tool-group">
        <label for="color-picker" class="color-picker-label" title="Select Drawing Color"></label>
        <input type="color" id="color-picker" value="#000000">
        <span id="color-description" class="trigger-description">Color</span>
    </div>

</div>

<!-- Ghost element for sidebar drag -->
<div id="ghost-drag-preview" style="display: none;"></div>

<script type="module" src="js/app.js"></script>
</body>
</html>