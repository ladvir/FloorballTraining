@page "/trainings"
@inject AppSettings AppSettings
@inject IViewTrainingByCriteriaUseCase ViewTrainingByCriteriaUseCase

<MudText Typo="Typo.h4">Tréninky</MudText>
<MudPaper Elevation="0" Class="d-block gap-4">
    <SearchTrainingComponent SearchCriteria="@_searchCriteria" DurationMax="AppSettings.MaxActivityDuration" PersonsMax="@AppSettings.MaximalPersons" OnSearchItem="SearchByCriteria"/>
    <TrainingListComponent Trainings="@_trainings"/>
</MudPaper>
@code {
    SearchCriteria _searchCriteria = new ();
    List<Training> _trainings = new();
    
    protected override async Task OnInitializedAsync()
    {
        await SearchByCriteria(_searchCriteria);
    }
    
    private async Task SearchByCriteria(SearchCriteria searchCriteria)
    {
        _searchCriteria = searchCriteria;
        var result = await ViewTrainingByCriteriaUseCase.ExecuteAsync(_searchCriteria);
        _trainings = result.ToList();
    }
}
