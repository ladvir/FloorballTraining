@inject AppSettings AppSettings
<MudDialog >
<DialogContent>
    <SearchActivityComponent ActivitySearchCriteria="@ActivitySearchCriteria" DurationMax="AppSettings.MaxActivityDuration" PersonsMax="@AppSettings.MaximalPersons" OnSearchItem="(e) => ActivitySearchCriteria=e" />
    <br/>
    <ActivitySelectionListComponent ActivitySearchCriteria="@ActivitySearchCriteria" SelectedActivities="@SelectedActivities" /> 
</DialogContent>
    <DialogActions>
        <MudPaper Class="align-content-center pa-2" Elevation="0"> 
            <MudButton ButtonType="ButtonType.Button" Variant="Variant.Filled" Color="Color.Primary" OnClick="Close">Zruš</MudButton>
            <MudButton ButtonType="ButtonType.Button" Variant="Variant.Filled" Color="Color.Primary" OnClick="ConfirmSelection">OK</MudButton>
        </MudPaper>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    MudDialogInstance MudDialog { get; set; } = new();

    [Parameter]
    public ActivitySearchCriteria ActivitySearchCriteria { get; set; } = null!;
    
    public List<Activity> SelectedActivities { get; set; } = new();
    
    [Parameter]
    public EventCallback<List<Activity>> OnActivitySelected { get; set; }
    
    void ConfirmSelection()
    {
        var result = DialogResult.Ok(SelectedActivities, SelectedActivities.GetType());
        MudDialog.Close(result);
    }

    void Close()
    {
        MudDialog.Close(DialogResult.Cancel());
    }
}




