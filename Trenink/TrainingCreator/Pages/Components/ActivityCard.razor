@using TrainingDataAccess.Models
@inject IDialogService DialogService
<MudCard Elevation="0" Outlined="true" Style="min-width: 10vw; min-height: 10vh;  max-width: 10vw; max-height: 10vh; position:relative; overflow-wrap: break-word ">
    <MudCardHeader>
        <CardHeaderAvatar>
            <MudAvatar Color="Color.Secondary" >I</MudAvatar>
        </CardHeaderAvatar>
        <CardHeaderContent>
            <MudText Typo="Typo.body1">@Activity.Name</MudText>
        </CardHeaderContent>
        <CardHeaderActions>
            <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Default" OnClick="ShowDetail" />
        </CardHeaderActions>
    </MudCardHeader>
    @*<MudCardMedia Image="images/pilars.jpg" Height="50" />*@
    <MudCardContent>
        <MudText Typo="Typo.body2" GutterBottom="true" Style="overflow: hidden; max-height: 5vh">@Description</MudText>
    </MudCardContent>
    <MudCardActions>
        <MudIconButton Icon="@Icons.Material.Filled.Favorite" Color="Color.Default" />
        <MudIconButton Icon="@Icons.Material.Filled.Share" Color="Color.Default" />
    </MudCardActions>
</MudCard>

@code {

        private const int DescriptionLength = 150;

    [Parameter]
    public Activity Activity { get; set; } = new Activity();

    private string Description
    {
        get
        {
            var descr = Activity.Description;

            return descr.Length >= DescriptionLength ? descr[..(DescriptionLength-3)] + "..." : descr;
        }
    }

    private void ShowDetail()
    {
        var options = new DialogOptions
            {
                NoHeader = false,
                CloseOnEscapeKey = true,
                CloseButton = true,
                DisableBackdropClick = true,
                Position = DialogPosition.Center,
                MaxWidth = MaxWidth.ExtraLarge,
                FullWidth = true,
                FullScreen = false,

            };
        var parameters = new DialogParameters { ["Activity"] = Activity};
        
        DialogService.Show<ActivityDetailReadOnly>(string.Empty, parameters, options);
        
    }

}
